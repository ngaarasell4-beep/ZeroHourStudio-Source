<UserControl x:Class="ZeroHourStudio.UI.WPF.Views.ConflictResolutionDialog"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:ZeroHourStudio.UI.WPF.ViewModels"
             Background="#CC0A0E17">

    <!-- Glassmorphism Overlay -->
    <Border HorizontalAlignment="Center" VerticalAlignment="Center"
            MinWidth="600" MaxWidth="800" MaxHeight="600"
            CornerRadius="16" BorderThickness="1"
            BorderBrush="#33FFFFFF">
        <Border.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#E60D1117" Offset="0"/>
                <GradientStop Color="#F01A2332" Offset="1"/>
            </LinearGradientBrush>
        </Border.Background>
        <Border.Effect>
            <DropShadowEffect Color="#000000" BlurRadius="40" ShadowDepth="0" Opacity="0.5"/>
        </Border.Effect>

        <Grid Margin="24">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <StackPanel Grid.Row="0" Margin="0,0,0,16">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="âš " FontSize="20" Foreground="#FF6B00" Margin="0,0,8,0"/>
                    <TextBlock Text="ÙƒØ´Ù ØªØ¹Ø§Ø±Ø¶Ø§Øª" FontSize="18" FontWeight="Bold" Foreground="#E8EDF3"/>
                </StackPanel>
                <TextBlock Margin="0,4,0,0" FontSize="12" Foreground="#556677">
                    <Run Text="Ø§Ù„ÙˆØ­Ø¯Ø©: "/><Run Text="{Binding UnitName}" Foreground="#00D4FF"/>
                    <Run Text=" | "/><Run Text="{Binding TotalConflicts}" Foreground="#FF6B00"/>
                    <Run Text=" ØªØ¹Ø§Ø±Ø¶"/>
                </TextBlock>
            </StackPanel>

            <!-- Batch Actions -->
            <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,12">
                <Button Content="Ø¥Ø¹Ø§Ø¯Ø© ØªØ³Ù…ÙŠØ© Ø§Ù„ÙƒÙ„" Command="{Binding RenameAllCommand}"
                        Background="#00D4FF" Foreground="#0A0E17" FontWeight="Bold"
                        Padding="12,6" Margin="0,0,8,0" BorderThickness="0" Cursor="Hand" FontSize="11"/>
                <Button Content="ØªØ¬Ø§ÙˆØ² Ø§Ù„ÙƒÙ„" Command="{Binding SkipAllCommand}"
                        Background="#21262D" Foreground="#C9D1D9"
                        Padding="12,6" Margin="0,0,8,0" BorderBrush="#30363D" BorderThickness="1" Cursor="Hand" FontSize="11"/>
                <Button Content="Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„ÙƒÙ„" Command="{Binding OverwriteAllCommand}"
                        Background="#FF3366" Foreground="#FFFFFF"
                        Padding="12,6" Margin="0,0,8,0" BorderThickness="0" Cursor="Hand" FontSize="11"/>
                <Button Content="ðŸ§¬ Ø¯Ù…Ø¬ Ø°ÙƒÙŠ" Click="SmartMerge_Click"
                        Background="#00CC66" Foreground="#0A0E17" FontWeight="Bold"
                        Padding="12,6" BorderThickness="0" Cursor="Hand" FontSize="11"/>
            </StackPanel>

            <!-- Conflict List -->
            <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto">
                <ItemsControl ItemsSource="{Binding Conflicts}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border CornerRadius="8" Background="#161B22" Padding="12" Margin="0,0,0,6">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <!-- Name + Type -->
                                    <StackPanel Grid.Row="0" Grid.Column="0">
                                        <TextBlock Text="{Binding OriginalName}" FontSize="13"
                                                   Foreground="#E8EDF3" FontWeight="SemiBold"/>
                                        <StackPanel Orientation="Horizontal" Margin="0,2,0,0">
                                            <Border Background="#2D1A0D" CornerRadius="3" Padding="4,1" Margin="0,0,6,0">
                                                <TextBlock Text="{Binding KindText}" FontSize="9" Foreground="#FF6B00"/>
                                            </Border>
                                            <Border Background="#1A2332" CornerRadius="3" Padding="4,1">
                                                <TextBlock Text="{Binding DefinitionType}" FontSize="9" Foreground="#556677"/>
                                            </Border>
                                        </StackPanel>
                                    </StackPanel>

                                    <!-- Action Selector -->
                                    <ComboBox Grid.Row="0" Grid.Column="1"
                                              SelectedIndex="2" VerticalAlignment="Center"
                                              Background="#21262D" Foreground="#C9D1D9"
                                              BorderBrush="#30363D" Padding="8,4" FontSize="11">
                                        <ComboBoxItem Content="ØªØ¬Ø§ÙˆØ²"/>
                                        <ComboBoxItem Content="Ø§Ø³ØªØ¨Ø¯Ø§Ù„"/>
                                        <ComboBoxItem Content="Ø¥Ø¹Ø§Ø¯Ø© ØªØ³Ù…ÙŠØ©"/>
                                    </ComboBox>

                                    <!-- Rename Input -->
                                    <Grid Grid.Row="2" Grid.ColumnSpan="2" Margin="0,6,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯:" FontSize="10"
                                                   Foreground="#556677" VerticalAlignment="Center" Margin="0,0,8,0"/>
                                        <TextBox Grid.Column="1" Text="{Binding ProposedName, UpdateSourceTrigger=PropertyChanged}"
                                                 Background="#0D1117" Foreground="#00FF88" BorderBrush="#21262D"
                                                 Padding="8,4" FontSize="11" FontFamily="Consolas"/>
                                    </Grid>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>

            <!-- Action Buttons -->
            <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,16,0,0">
                <Button Content="Ø¥Ù„ØºØ§Ø¡" Padding="20,8" Margin="0,0,8,0"
                        Background="#21262D" Foreground="#C9D1D9"
                        BorderBrush="#30363D" BorderThickness="1" Cursor="Hand"
                        Click="Cancel_Click" FontSize="12"/>
                <Button Content="âš¡ ØªØ£ÙƒÙŠØ¯ ÙˆÙ†Ù‚Ù„" Padding="20,8"
                        Background="#00D4FF" Foreground="#0A0E17"
                        FontWeight="Bold" BorderThickness="0" Cursor="Hand"
                        Click="Confirm_Click" FontSize="12"/>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>
