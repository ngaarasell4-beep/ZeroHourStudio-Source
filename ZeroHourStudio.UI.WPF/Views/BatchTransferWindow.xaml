<Window x:Class="ZeroHourStudio.UI.WPF.Views.BatchTransferWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:conv="clr-namespace:ZeroHourStudio.UI.WPF"
        Title="ðŸ“¦ Ø§Ù„Ù†Ù‚Ù„ Ø§Ù„Ø¯ÙØ¹ÙŠ" Height="650" Width="800"
        Background="#0D1117" WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize" FontFamily="Segoe UI">

    <Window.Resources>
        <conv:BoolToVisibilityConverter x:Key="BoolToVis"/>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- === Ø§Ù„Ø¹Ù†ÙˆØ§Ù† === -->
        <Border Grid.Row="0" Padding="24,18" Background="#161B22">
            <StackPanel>
                <TextBlock Text="ðŸ“¦ Ø§Ù„Ù†Ù‚Ù„ Ø§Ù„Ø¯ÙØ¹ÙŠ" FontSize="22" FontWeight="Bold" Foreground="White"/>
                <TextBlock Foreground="#8B949E" FontSize="13" Margin="0,4,0,0">
                    <Run Text="Ù†Ù‚Ù„"/>
                    <Run Text="{Binding TotalUnits}" FontWeight="Bold" Foreground="#58A6FF"/>
                    <Run Text="ÙˆØ­Ø¯Ø© Ù…Ù†"/>
                    <Run Text="{Binding SourceModName}" FontWeight="Bold" Foreground="#F0883E"/>
                    <Run Text="Ø¥Ù„Ù‰"/>
                    <Run Text="{Binding TargetModName}" FontWeight="Bold" Foreground="#3FB950"/>
                </TextBlock>
            </StackPanel>
        </Border>

        <!-- === Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ù…Ø¹ Ø­Ø§Ù„Ø§ØªÙ‡Ø§ === -->
        <Border Grid.Row="1" Margin="16,8" CornerRadius="8" Background="#161B22" BorderBrush="#30363D" BorderThickness="1">
            <ListView ItemsSource="{Binding UnitResults}" Background="Transparent" BorderThickness="0"
                      ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <Border Padding="12,8" Margin="4,2" CornerRadius="6" Background="#21262D">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø­Ø§Ù„Ø© -->
                                <TextBlock Grid.Column="0" Text="{Binding StatusIcon}" FontSize="18"
                                           VerticalAlignment="Center" Margin="0,0,10,0"/>

                                <!-- Ø§Ø³Ù… Ø§Ù„ÙˆØ­Ø¯Ø© ÙˆØ§Ù„ØªÙØ§ØµÙŠÙ„ -->
                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock Text="{Binding UnitName}" Foreground="White"
                                               FontWeight="SemiBold" FontSize="13"/>
                                    <TextBlock Text="{Binding StatusMessage}" Foreground="#8B949E"
                                               FontSize="11" TextTrimming="CharacterEllipsis"/>
                                </StackPanel>

                                <!-- Ø¹Ø¯Ø¯ Ø§Ù„ØªØ¹Ø§Ø±Ø¶Ø§Øª -->
                                <Border Grid.Column="2" CornerRadius="10" Padding="8,2"
                                        Background="#30363D" Margin="6,0"
                                        VerticalAlignment="Center"
                                        Visibility="{Binding HasConflicts, Converter={StaticResource BoolToVis}, FallbackValue=Collapsed}">
                                    <TextBlock Foreground="#F0883E" FontSize="11">
                                        <Run Text="{Binding ConflictsDetected, Mode=OneWay}"/>
                                        <Run Text="ØªØ¹Ø§Ø±Ø¶"/>
                                    </TextBlock>
                                </Border>

                                <!-- Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù„ÙØ§Øª -->
                                <TextBlock Grid.Column="3" Foreground="#3FB950" FontSize="11"
                                           VerticalAlignment="Center">
                                    <Run Text="{Binding FilesTransferred, Mode=OneWay}"/>
                                    <Run Text="Ù…Ù„Ù"/>
                                </TextBlock>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Border>

        <!-- === Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… === -->
        <Border Grid.Row="2" Padding="16,8" Background="#161B22">
            <StackPanel>
                <!-- Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„ÙƒÙ„ÙŠ -->
                <Grid Margin="0,4">
                    <ProgressBar Value="{Binding OverallProgress}" Maximum="100"
                                 Height="8" Background="#30363D" Foreground="#58A6FF"
                                 Style="{x:Null}"/>
                </Grid>

                <Grid Margin="0,4">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Foreground="#8B949E" FontSize="12"
                               Text="{Binding ProgressMessage}"/>
                    <TextBlock Grid.Column="1" Foreground="#58A6FF" FontSize="12" FontWeight="Bold">
                        <Run Text="{Binding CompletedCount, Mode=OneWay}"/>
                        <Run Text="/"/>
                        <Run Text="{Binding TotalUnits, Mode=OneWay}"/>
                    </TextBlock>
                </Grid>
            </StackPanel>
        </Border>

        <!-- === Ø§Ù„Ù…Ù„Ø®Øµ ÙˆØ§Ù„Ø£Ø²Ø±Ø§Ø± === -->
        <Border Grid.Row="3" Padding="16,12" Background="#0D1117"
                BorderBrush="#30363D" BorderThickness="0,1,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Ù…Ù„Ø®Øµ -->
                <TextBlock Grid.Column="0" Text="{Binding SummaryText}" Foreground="#8B949E"
                           FontSize="12" VerticalAlignment="Center" TextWrapping="Wrap"/>

                <!-- Ø¥Ù„ØºØ§Ø¡ -->
                <Button Grid.Column="1" Content="Ø¥Ù„ØºØ§Ø¡" Padding="18,8" Margin="8,0"
                        Background="#30363D" Foreground="White" BorderThickness="0"
                        FontSize="13" Cursor="Hand" Click="CancelButton_Click"/>

                <!-- Ø¨Ø¯Ø¡ Ø§Ù„Ù†Ù‚Ù„ -->
                <Button Grid.Column="2" Content="â–¶ Ø¨Ø¯Ø¡ Ø§Ù„Ù†Ù‚Ù„" Padding="18,8"
                        Background="#238636" Foreground="White" BorderThickness="0"
                        FontSize="13" FontWeight="Bold" Cursor="Hand"
                        Click="StartButton_Click"
                        IsEnabled="{Binding CanStart}"/>
            </Grid>
        </Border>
    </Grid>
</Window>
