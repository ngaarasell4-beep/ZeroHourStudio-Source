<Window x:Class="ZeroHourStudio.UI.WPF.Views.CrossReferenceMapWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ðŸ“Š Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ Ø§Ù„ØªÙ‚Ø§Ø·Ø¹ÙŠØ©"
        Width="850" Height="600"
        WindowStartupLocation="CenterOwner"
        Background="#1E1E2E"
        Foreground="White"
        FontFamily="Segoe UI">

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,10">
            <TextBlock Text="ðŸ“Š Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ Ø§Ù„ØªÙ‚Ø§Ø·Ø¹ÙŠØ©" FontSize="20" FontWeight="Bold" Foreground="#00CC66"/>
            <TextBlock x:Name="StatsText" Foreground="#AAAAAA" FontSize="12" Margin="0,4,0,0"/>
        </StackPanel>

        <!-- Category Tabs -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,8">
            <RadioButton Content="ðŸ”« Ø£Ø³Ù„Ø­Ø©" GroupName="Category" IsChecked="True" Click="Category_Weapons"
                         Foreground="#87CEEB" Margin="0,0,12,0" FontSize="12"/>
            <RadioButton Content="ðŸ›¡ Ø¯Ø±ÙˆØ¹" GroupName="Category" Click="Category_Armor"
                         Foreground="#FFD700" Margin="0,0,12,0" FontSize="12"/>
            <RadioButton Content="âœ¨ Ù…Ø¤Ø«Ø±Ø§Øª" GroupName="Category" Click="Category_FX"
                         Foreground="#FF6666" Margin="0,0,12,0" FontSize="12"/>
            <RadioButton Content="ðŸŽ¨ Ù†Ù…Ø§Ø°Ø¬" GroupName="Category" Click="Category_Models"
                         Foreground="#CC88FF" Margin="0,0,12,0" FontSize="12"/>
            <RadioButton Content="ðŸ–¼ Ù†Ø³ÙŠØ¬" GroupName="Category" Click="Category_Textures"
                         Foreground="#88DDAA" FontSize="12"/>
        </StackPanel>

        <!-- Search -->
        <Border Grid.Row="2" Background="#252538" CornerRadius="6" Padding="8,4" Margin="0,0,0,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="ðŸ” Ø¨Ø­Ø«:" Foreground="#AAA" VerticalAlignment="Center" Margin="0,0,8,0"/>
                <TextBox Grid.Column="1" x:Name="SearchBox" Background="#2A2A3A" Foreground="White"
                         BorderBrush="#444466" Padding="6,4" TextChanged="SearchBox_TextChanged"/>
            </Grid>
        </Border>

        <!-- Resource List + empty state -->
        <Grid Grid.Row="3">
            <ListBox x:Name="ResourceList" Background="#1A1A2A" BorderBrush="#333348" BorderThickness="1"
                     SelectionChanged="ResourceList_SelectionChanged">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border Padding="10,6" Margin="1">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="{Binding ResourceName}" FontWeight="SemiBold" Foreground="#CCCCCC" FontSize="13"/>
                                <TextBlock Foreground="#777777" FontSize="10" Margin="0,2,0,0"
                                           TextTrimming="CharacterEllipsis">
                                    <Run Text="Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ: "/>
                                    <Run Text="{Binding UsageCount, Mode=OneWay}"/>
                                    <Run Text=" ÙˆØ­Ø¯Ø©"/>
                                </TextBlock>
                            </StackPanel>

                            <!-- Usage Count Badge -->
                            <Border Grid.Column="1" CornerRadius="10" Padding="8,2" VerticalAlignment="Center" Margin="8,0">
                                <Border.Style>
                                    <Style TargetType="Border">
                                        <Setter Property="Background" Value="#1A3A2A"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IsShared}" Value="True">
                                                <Setter Property="Background" Value="#3A2A1A"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>
                                <TextBlock FontSize="11" FontWeight="Bold" HorizontalAlignment="Center">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Foreground" Value="#00CC66"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding IsShared}" Value="True">
                                                    <Setter Property="Foreground" Value="#FFD700"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                    <Run Text="{Binding UsageCount, Mode=OneWay}"/>
                                </TextBlock>
                            </Border>

                            <!-- Shared Indicator -->
                            <TextBlock Grid.Column="2" FontSize="12" VerticalAlignment="Center">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Text" Value=""/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IsShared}" Value="True">
                                                <Setter Property="Text" Value="âš  Ù…Ø´ØªØ±Ùƒ"/>
                                                <Setter Property="Foreground" Value="#FFD700"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </Grid>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                    <Setter Property="Background" Value="Transparent"/>
                    <Setter Property="Padding" Value="0"/>
                </Style>
            </ListBox.ItemContainerStyle>
            </ListBox>
            <TextBlock x:Name="EmptyCrossRefMessage" Visibility="Collapsed"
                       Text="Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…ÙˆØ§Ø±Ø¯. ØªØ£ÙƒØ¯ Ù…Ù† ÙØªØ­ Ù…ÙˆØ¯ Ù…ØµØ¯Ø± ÙÙŠÙ‡ Ù…Ù„ÙØ§Øª INI Ù…ÙÙƒÙˆÙƒØ© (Data\INI Ø£Ùˆ INI)."
                       Foreground="#888" FontSize="13" TextWrapping="Wrap" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="24"/>
        </Grid>

        <!-- Unit Users Panel -->
        <Border Grid.Row="4" Background="#252538" CornerRadius="6" Padding="10,6" Margin="0,8,0,0" MaxHeight="100">
            <StackPanel>
                <TextBlock Text="Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©:" Foreground="#AAAAAA" FontSize="11" Margin="0,0,0,4"/>
                <TextBlock x:Name="UsersText" Foreground="#87CEEB" FontSize="11" TextWrapping="Wrap"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
