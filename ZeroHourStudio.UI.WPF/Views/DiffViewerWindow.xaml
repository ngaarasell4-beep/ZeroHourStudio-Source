<Window x:Class="ZeroHourStudio.UI.WPF.Views.DiffViewerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ðŸ” Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª (Diff Viewer)"
        Width="900" Height="650"
        WindowStartupLocation="CenterOwner"
        Background="#1E1E2E"
        Foreground="White"
        FontFamily="Consolas">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="16,12,16,8">
            <TextBlock Text="ðŸ” Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª" FontSize="20" FontWeight="Bold" Foreground="#00CC66" FontFamily="Segoe UI"/>
        </StackPanel>

        <!-- File Selector -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="16,0,16,8">
            <TextBlock Text="Ø§Ù„Ù…Ù„Ù:" Foreground="#AAAAAA" VerticalAlignment="Center" FontFamily="Segoe UI" Margin="0,0,8,0"/>
            <ComboBox x:Name="FileSelector" Width="350"
                      DisplayMemberPath="FileName"
                      SelectionChanged="FileSelector_SelectionChanged"
                      Background="#2A2A3A" Foreground="White" BorderBrush="#444466"/>
        </StackPanel>

        <!-- Statistics Bar -->
        <Border Grid.Row="2" Background="#252538" Margin="16,0,16,8" Padding="12,6" CornerRadius="6">
            <StackPanel Orientation="Horizontal" x:Name="StatsPanel">
                <TextBlock x:Name="StatsText" Foreground="#87CEEB" FontFamily="Segoe UI" FontSize="12"/>
            </StackPanel>
        </Border>

        <!-- Diff Content -->
        <ListBox Grid.Row="3" x:Name="DiffListBox" Margin="16,0,16,8"
                 Background="#1A1A2A" BorderBrush="#333348" BorderThickness="1"
                 ScrollViewer.HorizontalScrollBarVisibility="Auto"
                 ScrollViewer.VerticalScrollBarVisibility="Auto"
                 VirtualizingStackPanel.IsVirtualizing="True">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="25"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Line Number -->
                        <TextBlock Grid.Column="0" Text="{Binding LineNumber}" Foreground="#555577"
                                   FontSize="11" HorizontalAlignment="Right" Padding="0,2,8,2"/>

                        <!-- Type Indicator -->
                        <TextBlock Grid.Column="1" FontSize="12" FontWeight="Bold" Padding="0,2" HorizontalAlignment="Center">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Text" Value=" "/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Type}" Value="Added">
                                            <Setter Property="Text" Value="+"/>
                                            <Setter Property="Foreground" Value="#00CC66"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Type}" Value="Removed">
                                            <Setter Property="Text" Value="-"/>
                                            <Setter Property="Foreground" Value="#FF6666"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Type}" Value="Modified">
                                            <Setter Property="Text" Value="~"/>
                                            <Setter Property="Foreground" Value="#FFD700"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>

                        <!-- Content -->
                        <TextBlock Grid.Column="2" Text="{Binding Content}" Padding="4,2" FontSize="12">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Foreground" Value="#CCCCCC"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Type}" Value="Added">
                                            <Setter Property="Foreground" Value="#00DD77"/>
                                            <Setter Property="Background" Value="#0D1F15"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Type}" Value="Removed">
                                            <Setter Property="Foreground" Value="#FF6666"/>
                                            <Setter Property="Background" Value="#1F0D0D"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Type}" Value="Modified">
                                            <Setter Property="Foreground" Value="#FFD700"/>
                                            <Setter Property="Background" Value="#1F1F0D"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="Padding" Value="0"/>
                    <Setter Property="Margin" Value="0"/>
                    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                </Style>
            </ListBox.ItemContainerStyle>
        </ListBox>

        <!-- Buttons -->
        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right" Margin="16,0,16,12">
            <Button Content="ðŸ“‹ ØªØµØ¯ÙŠØ± HTML" Click="ExportHtml_Click" Width="130" Height="34"
                    Background="#2A4A5A" Foreground="White" BorderBrush="#4488AA" BorderThickness="1"
                    Margin="0,0,8,0" Cursor="Hand" FontFamily="Segoe UI">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="1" CornerRadius="6" Padding="8,4">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Button.Template>
            </Button>
            <Button Content="Ø¥ØºÙ„Ø§Ù‚" Click="Close_Click" Width="80" Height="34"
                    Background="#3A3A4A" Foreground="White" BorderBrush="#555577" BorderThickness="1"
                    Cursor="Hand" FontFamily="Segoe UI">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="1" CornerRadius="6" Padding="8,4">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Button.Template>
            </Button>
        </StackPanel>
    </Grid>
</Window>
